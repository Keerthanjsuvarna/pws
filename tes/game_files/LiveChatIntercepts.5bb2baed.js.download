((self||this)["webpackJsonp@sprinklr/chat-web-client"]=(self||this)["webpackJsonp@sprinklr/chat-web-client"]||[]).push([[41],{1883:function(e,t,a){"use strict";a.r(t);var r=a(365),n=a.n(r),c=a(114),i=a.n(c),s=a(429),d=a.n(s),I=a(178),E=a.n(I),o=a(710),p=a(507);const l="CLOSED",u="TRIGGERED";var v=a(542),C=a(537),O=a(10),T=a(113),R=a(538),b=a(467);const G=e=>{switch(e){case R.a.CLOSE:case R.a.URL:return e;default:return"NEW_CONVERSATION"}},y=e=>{const{interceptId:t,creative:a,targets:n,onClose:c,settings:s,creativeId:I,variantLessInterceptId:R}=e,y=Object(O.b)(),N=(e=>{let{interceptId:t,targets:a,creativeId:n}=e;const c=Object(o.a)({targets:a,interceptId:t,creativeId:n});return Object(r.useCallback)((e=>e.type===l?c({type:p.a.CLOSE}):e.type===u?c({type:p.a.TRIGGERED}):c({type:p.a.ENGAGE,buttonId:E()(e,"button.id")})),[c])})({interceptId:t,targets:n,creativeId:I}),f=Object(r.useContext)(C.a),g=Object(v.a)(),{createCase:S,disableManualResponse:D=!1}=Object(r.useMemo)((()=>d()(s)?{createCase:E()(a,"additional.createCase"),disableManualResponse:E()(a,"disableManualResponse")}:{createCase:E()(s,"liveChatCreateCase"),disableManualResponse:E()(s,"liveChatDisableManualResponse")}),[a,s]);return Object(r.useEffect)((()=>{const e=e=>{e.id===t&&N(e).catch((e=>{Object(T.b)(e)})).finally((()=>{e.type!==u&&c(t)}))};return y.sprChat("onPromptAction",e),()=>{y.sprChat("offPromptAction",e)}}),[]),Object(r.useEffect)((()=>(y.sprChat("openNewPrompt",{id:t,messages:[{text:a.text,disableManualResponse:D}],buttons:i()(a.buttons,(e=>({id:e.id,label:e.title,type:G(E()(n,[`${e.id}`,"type"])),value:E()(n,[`${e.id}`,"value"])}))),additional:{...E()(a,"additional"),createCase:S,interceptId:t,creativeId:I}}),()=>{y.sprChat("clearPrompt",{id:t})})),[t,a,n]),Object(r.useEffect)((()=>()=>{f.getActionState(R)===p.a.TRIGGERED&&(g({type:b.a.INTERCEPT_AUTO_CLOSED,payload:{interceptId:t,creativeId:I}}),c(t))}),[]),null};var N=n.a.memo(y),f=a(477),g=a(366);const S=e=>{let{intercepts:t,onClose:a}=e;return Object(g.jsx)(n.a.Fragment,null,i()(t,(e=>{const t=f.a.getId(e);return Object(g.jsx)(N,{key:t,interceptId:t,creativeId:f.a.getCreativeId(e),creative:f.a.getCreative(e),targets:f.a.getTargets(e),onClose:a,settings:f.a.getSettings(e),variantLessInterceptId:e.interceptId})})))};t.default=n.a.memo(S)},542:function(e,t,a){"use strict";var r=a(365),n=a(630),c=a(467);t.a=()=>{const{refetch:e}=Object(n.a)({skipQueryOnMount:!0});return Object(r.useCallback)((t=>{const{type:a,payload:r}=t;switch(a){case c.a.INTERCEPT_TRIGGERED:return e({eventType:c.a.INTERCEPT_TRIGGERED,eventId:r.interceptId,details:{creativeId:r.creativeId}});case c.a.INTERCEPT_SNOOZE_TRIGGERED:return e({eventType:c.a.INTERCEPT_SNOOZE_TRIGGERED,eventId:r.interceptId,details:{creativeId:r.creativeId}});case c.a.INTERCEPT_ENGAGED:return e({eventType:c.a.INTERCEPT_ENGAGED,eventId:r.interceptId,details:{targetId:r.targetId,creativeId:r.creativeId}});case c.a.SNOOZE:return e({eventType:c.a.SNOOZE,eventId:r.interceptId,details:{targetId:r.targetId,creativeId:r.creativeId}});case c.a.INTERCEPT_AUTO_CLOSED:return e({eventType:c.a.INTERCEPT_AUTO_CLOSED,eventId:r.interceptId,details:{creativeId:r.creativeId}});default:return e({eventType:c.a.INTERCEPT_CLOSED,eventId:r.interceptId,details:{creativeId:r.creativeId}})}}),[e])}},710:function(e,t,a){"use strict";var r=a(365),n=a(537),c=a(542),i=a(631);var s=a(467),d=a(507),I=a(538);t.a=function(e){let{targets:t,interceptId:a,creativeId:E}=e;const o=Object(c.a)(),p=Object(r.useContext)(n.a);return Object(r.useCallback)((e=>{const r=()=>{o({type:s.a.INTERCEPT_CLOSED,payload:{interceptId:a,creativeId:E}}),p.setAction(a,d.a.CLOSE)};return new Promise(((n,c)=>{const{type:l,buttonId:u}=e;if(l===d.a.CLOSE)return r(),void n();if(l===d.a.TRIGGERED)return o({type:s.a.INTERCEPT_TRIGGERED,payload:{interceptId:a,creativeId:E}}),p.setAction(a,d.a.TRIGGERED),void n();if(l===d.a.SNOOZE)return(e=>{o({type:s.a.SNOOZE,payload:{targetId:e,interceptId:a,creativeId:E}}),p.setAction(a,d.a.SNOOZE)})(),void n();if(l===d.a.ENGAGE){if(u){const e=((e,t)=>t&&e?t[e]:void 0)(u,t),a=e&&i.a.getType(e);if(!a)return void n();if(a===I.a.CLOSE)return r(),void n()}return(e=>{o({type:s.a.INTERCEPT_ENGAGED,payload:{targetId:e,interceptId:a,creativeId:E}}),p.setAction(a,d.a.ENGAGE)})(u),void n()}n()}))}),[o,t,a])}}}]);