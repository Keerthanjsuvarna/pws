((self||this)["webpackJsonp@sprinklr/chat-web-client"]=(self||this)["webpackJsonp@sprinklr/chat-web-client"]||[]).push([[48],{1862:function(t,e,o){"use strict";o.r(e);var r=o(365),n=o.n(r),a=o(370),c=o(377),i=o(366),s=o(178),b=o.n(s),l=o(369),p=o(367),d=o(512),m=o(368);const j=Object(p.a)("div",{target:"ed55mpd0"})("width:100%;padding:",Object(m.h)("proactivePrompt.padding"),";display:flex;flex-direction:column;color:",Object(m.b)("charcoal"),";"),O=Object(p.a)(d.a,{target:"ed55mpd1"})("position:absolute;flex-shrink:0;padding:0;border-radius:",(t=>Object(m.a)("proactivePrompt.removeIconButton.button.borderRadius","50%")(t)),";background-color:",Object(m.f)("proactivePrompt.removeIconButton.button.backgroundColor"),";height:",Object(m.f)("proactivePrompt.removeIconButton.button.height"),"px;width:",Object(m.f)("proactivePrompt.removeIconButton.button.width"),"px;box-shadow:",Object(m.f)("proactivePrompt.removeIconButton.button.boxShadow"),";"),u=t=>Object(i.css)("height:",Object(m.f)("proactivePrompt.removeIconButton.icon.height")({theme:t}),"px;width:",Object(m.f)("proactivePrompt.removeIconButton.icon.width")({theme:t}),"px;fill:",Object(m.f)("proactivePrompt.removeIconButton.icon.fill")({theme:t}),";");var h=o(114),g=o.n(h),f=o(379),v=o(401),x=o(392),P=o(371);const y=t=>Object(m.f)("proactivePrompt.removeIconButton.button.width")({theme:t})/2+2,I=Object(p.a)("div",{target:"e1a4zrzl0"})((t=>t.isActionable&&"cursor: pointer;"),";position:relative;margin:0 0 16px;background-color:",Object(m.b)("white"),";",(t=>t.messageStyles),";"),w=Object(p.a)("div",{target:"e1a4zrzl1"})("flex-grow:1;",(t=>t.renderRemoveIcon&&Object(P.c)(`padding-right: ${y(t.theme)}px`,`padding-left: ${y(t.theme)}px`)(t)),";"),A=Object(p.a)(O,{target:"e1a4zrzl2"})("top:",Object(m.f)("proactivePrompt.removeIconButton.marginTop"),"px;",(t=>`${Object(P.c)(`right: ${Object(m.f)("proactivePrompt.removeIconButton.marginRight")(t)}px`,`left: ${Object(m.f)("proactivePrompt.removeIconButton.marginLeft")(t)}px`)(t)}`),";");var R=o(585);const T=Object(p.a)("div",{target:"e106gict0"})("background-color:",Object(m.b)("white"),";"),E=Object(p.a)("div",{target:"e106gict1"})("height:",Object(m.f)("proactivePrompt.removeIconButton.button.height"),"px;margin:",Object(m.h)("proactivePrompt.removeIconButton.margin"),";"),C=Object(p.a)("div",{target:"e106gict2"})({name:"79elbk",styles:"position:relative;"}),k=Object(p.a)(O,{target:"e106gict3"})("top:0px;",(t=>Object(R.f)(t.theme)?`left: ${Object(m.f)("proactivePrompt.removeIconButton.marginLeft")(t)}px`:`right: ${Object(m.f)("proactivePrompt.removeIconButton.marginRight")(t)}px`),";opacity:0;",C,":hover &{opacity:1;}",P.k,"{opacity:1;}"),B=Object(p.a)("div",{target:"e106gict4"})((t=>t.renderRemoveIconInside&&`padding-top: ${Object(R.c)(Object(m.f)("proactivePrompt.message.boxShadow")(t)).top}px`),";:last-child{",I,"{:last-child{",(t=>`margin: 0 0 ${Object(R.c)(Object(m.f)("proactivePrompt.message.boxShadow")(t)).bottom}px`),";}}}");var $=o(374),N=o(432),S=o(870);var D=t=>{const{message:e,onClick:o,onClose:n,isActionable:a}=t,s=Object(c.b)(),{direction:b}=Object($.a)(),l=Object(m.f)("proactivePrompt.message")({theme:s}),p=Object(f.a)(),d=x.a.getPromptEnableIndividualMessageDismissal(p),j=Object(r.useCallback)((t=>{"A"===t.target.tagName.toUpperCase()&&t.stopPropagation()}),[]);return Object(i.jsx)(I,{className:"text-wrap flex-row-container",messageStyles:l,onClick:o,isActionable:a},Object(i.jsx)(w,{direction:b,renderRemoveIcon:d,onClick:j},Object(i.jsx)(S.a,{text:e.text||"",textEntities:e.textEntities})),d&&Object(i.jsx)(A,{className:"flex-column-container center-x-y",direction:b,onClick:t=>{t.stopPropagation(),n()},iconName:"closeIcon",Icon:N.a,iconCss:u(s)}))},G=o(375);const _=Object(p.a)("div",{target:"evyncl50"})("background-color:",Object(m.b)("white"),";box-shadow:",Object(m.f)("proactivePrompt.replyBox.boxShadow"),";border-radius:10px;margin:0 0 ",(t=>Object(R.c)(Object(m.f)("proactivePrompt.replyBox.boxShadow")(t)).bottom),"px;padding:14px 20px;font-size:",Object(m.e)("md"),";cursor:pointer;justify-content:space-between;"),M=Object(p.a)("div",{target:"evyncl51"})({name:"1nn7ex",styles:"color:#a9a9a9;"}),z=Object(p.a)(G.b,{target:"evyncl52"})("fill:",Object(m.b)("anchor"),";height:20px;width:20px;");var W=o(829);var H=t=>{const{onReply:e}=t,o=Object(f.a)();return Object(i.jsx)(_,{className:"flex-row-container",onClick:e},Object(i.jsx)(M,null,o.conversationScreen.inputPlaceholderMessage),Object(i.jsx)(z,{alt:W.a,name:G.a.ATTACHMENT}))},L=o(383);const V=Object(p.a)("div",{target:"eygqptd0"})("background-color:",Object(m.b)("white"),";"),Y=Object(p.a)(V,{target:"eygqptd1"})("display:flex;margin-bottom:",(t=>Object(R.c)(Object(m.f)("proactivePrompt.button.boxShadow")(t)).bottom),"px;border-radius:",8,"px;"),q=Object(p.a)("div",{target:"eygqptd2"})("display:flex;flex-wrap:wrap;",(t=>`\n      flex-direction: ${Object(R.f)(t.theme)?"row":"row-reverse"};\n      justify-content: ${Object(P.c)("flex-start","flex-end")(t)};\n    `),""),F=Object(p.a)(L.c,{target:"eygqptd3"})("border-radius:",8,"px;font-weight:400;min-width:88px;padding:10px 20px;",(t=>Object(m.f)("proactivePrompt.button")(t))," &:focus,&:hover{",Object(m.f)("proactivePrompt.button.hoverStyles"),"}"),U=t=>{let{handleClick:e,buttons:o}=t;const r=Object(c.b)(),{direction:n}=Object($.a)(),a=Object(R.f)(r)?"m-r-3":"m-l-3";return Object(i.jsx)(q,{onClick:e,theme:r,direction:n},g()(o,(t=>Object(i.jsx)(Y,{key:t.id,className:a},Object(i.jsx)(F,{size:L.a.LARGE,variant:L.b.TERTIARY,"data-id":t.id},t.label)))))};var J=n.a.memo(U),Z=o(830),K=o(389),Q=o(414);var X=t=>{const{id:e,messages:o,buttons:n,additional:a,onAction:s}=t,b=Object(c.b)(),l=Object(f.a)(),p=x.a.getPromptEnableIndividualMessageDismissal(l),d=Object(v.a)(),{hideReplyBox:m}=a||K.a,j=n&&n.length>0,O=!j,h=Object(r.useRef)(null);Object(r.useEffect)((()=>{var t;s({type:Z.a.TRIGGERED,promptId:e}),d({action:Q.a.PROACTIVE_PROMPT_TRIGGERED,label:null===(t=h.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})}),[]);const P=t=>{var o;const r=t.target.dataset.id,n=null===(o=h.current)||void 0===o?void 0:o.innerText;r&&(s({type:Z.a.ENGAGED,buttonId:r,promptId:e}),d({action:Q.a.PROACTIVE_PROMPT_ENGAGED,label:n,additional:{id:e,type:"CHAT"}}))},y=()=>{var t;s({type:Z.a.ENGAGED,promptId:e}),d({action:Q.a.PROACTIVE_PROMPT_ENGAGED,label:null===(t=h.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})},I=()=>{var t;O&&(s({type:Z.a.ENGAGED,promptId:e}),d({action:Q.a.PROACTIVE_PROMPT_ENGAGED,label:null===(t=h.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}}))},w=()=>{var t;s({type:Z.a.CLOSED,promptId:e}),d({action:Q.a.PROACTIVE_PROMPT_CLOSED,label:null===(t=h.current)||void 0===t?void 0:t.innerText,additional:{id:e,type:"CHAT"}})};return Object(i.jsx)(C,{className:"spr"},!p&&Object(i.jsx)(E,{className:"spr"},Object(i.jsx)(T,null,Object(i.jsx)(k,{className:"flex-column-container center-x-y",iconName:"closeIcon",Icon:N.a,iconCss:u(b),onClick:w,theme:b}))),Object(i.jsx)(B,{renderRemoveIconInside:p,ref:h},g()(o,((t,e)=>Object(i.jsx)(D,{key:`message_${e}`,message:t,onClose:w,onClick:I,isActionable:O})))),j?Object(i.jsx)(J,{handleClick:P,buttons:n}):m?null:Object(i.jsx)(H,{onReply:y}))},tt=o(380),et=o(1042);const ot=t=>{let{type:e,promptId:o,buttonId:r}=t;return{type:et.a,payload:{type:e,buttonId:r,promptId:o}}};var rt=n.a.forwardRef(((t,e)=>{const o=Object(tt.a)(ot),{prompt:r}=t;return Object(i.jsx)(j,{ref:e},Object(i.jsx)(X,{key:r.id,id:r.id,messages:r.messages,buttons:r.buttons,onAction:o,additional:r.additional}))})),nt=o(735),at=o(378),ct=o(428),it=o(10),st=o(525);const bt=Object(p.a)("div",{target:"e1f359l40"})("z-index:",(t=>Object(m.f)("frame.zIndex")(t)),";transform:translatez(",(t=>Object(m.f)("frame.translateZ")(t)),"px);position:fixed;width:500px;height:500px;bottom:0px;",(t=>`${Object(R.d)(t.theme).xEdgeToAlign}: 0px`),";content:'';pointer-events:none;background:",(t=>`radial-gradient(\n    at ${Object(R.d)(t.theme).xEdgeToAlign} bottom,\n    rgba(29, 39, 54, 0.1) 0%,\n    rgba(29, 39, 54, 0) 72%\n  );`),";"),lt=Object(p.a)("div",{target:"e1f359l41"})("background:transparent;position:fixed;max-height:80%;width:100%;height:",(t=>t.iframeHeight),"px;z-index:",(t=>Object(m.f)("frame.zIndex")(t)),";transform:translatez(",(t=>Object(m.f)("frame.translateZ")(t)),"px);visibility:",(t=>t.isVisible?"visible":"hidden"),";"),pt=Object(p.a)(lt,{target:"e1f359l42"})((t=>{let{theme:e,iframeWidth:o,visiblePrompt:r,promptBottomOffsetWhenOpenedAboveChatBox:n}=t;return Object(R.b)({theme:e,iframeWidth:o,visiblePrompt:r,promptBottomOffsetWhenOpenedAboveChatBox:n})}),""),dt=Object(p.a)(lt,{target:"e1f359l43"})((t=>{let{theme:e,iframeWidth:o,visiblePrompt:r,customTriggerPosition:n,promptBottomOffsetWhenOpenedAboveChatBox:a}=t;return Object(R.a)({theme:e,iframeWidth:o,visiblePrompt:r,customTriggerPosition:n,promptBottomOffsetWhenOpenedAboveChatBox:a})}),""),mt=Object(p.a)(st.a,{target:"e1f359l44"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),jt={name:"1egabj8",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:transparent;}"};var Ot=o(1033);const ut=t=>Object(ct.g)(Object(at.b)(t)),ht=Object(l.g)({proactivePrompt:{id:"proactivePrompt",defaultMessage:"Proactive Prompt"}});e.default=Object(l.h)((t=>{let{visiblePrompt:e,chatBoxFrameRef:o,customTriggerPosition:s,showWithBoxOpen:l,intl:p}=t;const d=Object(a.d)(ut),j=Object(c.b)(),[O,u]=Object(r.useState)(0),h=Object(r.useRef)(null),[g,f]=Object(r.useState)(null),v=Object(m.f)("proactivePrompt.maxWidth")({theme:j}),x=b()(e,"additional.text.maxWidth",v),P=Object(nt.a)(),y=s?dt:pt,I=()=>{const t=h.current,e=t?t.getBoundingClientRect().height:0;u(e)},w=Object(r.useCallback)((()=>{P(h),I()}),[P]);return Object(r.useEffect)((()=>{let t=null;return l&&(d?f(null):t=setTimeout((()=>{if(!d&&o.current){const t=o.current.getBoundingClientRect().top,r=Object(R.e)({chatBoxFrameTop:t,theme:j,visiblePrompt:e});f(l&&r>O?Object(it.b)().innerHeight-r:null)}}),[Ot.a])),()=>{t&&clearTimeout(t)}}),[d,o.current,O,l,e]),Object(i.jsx)(n.a.Fragment,null,Object(i.jsx)(y,{className:"spr-chat__proactive-box spr-live-chat-frame",iframeHeight:O,iframeWidth:x,theme:j,isVisible:d||null!==g,visiblePrompt:e,customTriggerPosition:s,promptBottomOffsetWhenOpenedAboveChatBox:g},Object(i.jsx)(mt,{name:"spr-chat__proactive-frame",contentDidMount:w,contentDidUpdate:I,"aria-label":p.formatMessage(ht.proactivePrompt),title:p.formatMessage(ht.proactivePrompt)},Object(i.jsx)(i.Global,{styles:jt}),Object(i.jsx)(rt,{ref:h,prompt:e}))),Object(i.jsx)(bt,{theme:j}))}))},383:function(t,e,o){"use strict";o.d(e,"c",(function(){return u})),o.d(e,"a",(function(){return h})),o.d(e,"b",(function(){return g}));var r=o(365),n=o.n(r),a=o(377),c=o(367),i=o(366),s=o(371);const b=`\n    border: 1px solid transparent;\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n      opacity: 0.6;\n    };\n    \n   &:focus {\n      ${s.h};\n   }\n   \n   &:active {\n      ${s.f};\n   }\n   \n   ${s.k} {\n      &:focus {\n        ${s.f};\n      }\n   \n     &:active {\n        ${s.h};\n     }\n   }\n`,l=Object(c.a)("button",{target:"er3vaeu0"})(b,";",(t=>Object(i.css)(t.buttonStyles,"","")),";");var p=o(368),d=o(466),m=o(389);function j(){return j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},j.apply(this,arguments)}const O=t=>{const e=Object(a.b)(),{size:o,variant:r,selected:n,shape:c,overrideStyles:s}=t,b=Object(p.f)(`button.${c||d.b.STANDARD}`)({theme:e})||m.a,O={...b.default,...b[r],...b[o],...s};return Object(i.jsx)(l,j({},t,{className:`text-wrap ${t.className}`,buttonStyles:O,"data-selected":n}),t.label||t.children)};O.defaultProps={shape:d.b.STANDARD,size:d.c.LARGE,variant:d.d.PRIMARY};var u=n.a.memo(O);const h={LARGE:"lg",MEDIUM:"md"},g={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary"}},497:function(t,e,o){"use strict";var r=o(540);e.a=r.a},540:function(t,e,o){"use strict";var r=o(365),n=o.n(r),a=o(366);function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},c.apply(this,arguments)}e.a=n.a.memo((t=>{let{text:e,...o}=t;return Object(a.jsx)("div",c({dangerouslySetInnerHTML:{__html:e}},o))}))},635:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var r=o(451);const n=(t,e)=>{const o=e.indices[0],n=e.indices[1],a=t.substring(o,n);if(e.phoneNumber){return`<a href=${Object(r.b)(e.phoneNumber)} target="_blank" rel="noopener noreferrer">${a}</a>`}return`<a href=${Object(r.c)(e.url)} target="_blank" rel="noopener noreferrer">${a}</a>`}},870:function(t,e,o){"use strict";o(365);var r=o(635),n=o(497),a=o(366);e.a=t=>{let{text:e,textEntities:o}=t;if(!o||!o.length)return Object(a.jsx)(n.a,{text:e});const c=o.reduce(((t,n,a)=>{const c=o[a+1],i=n.indices[1],s=e.substring(i,c?c.indices[0]:void 0);return`${t}${`${Object(r.a)(e,n)}${s}`}`}),e.substring(0,o[0].indices[0]));return Object(a.jsx)(n.a,{text:c})}}}]);